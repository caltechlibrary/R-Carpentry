knitr::read_chunk("math_trick.R")
a <- 17
b <- 34
a + b
shoe_size <- 9
shoe_size_mod <- (((shoe_size * 5) + 50) * 20) + 1018 - 1979
shoe_size_mod
shoe_size <- 9
shoe_size_mod <- (((shoe_size * 5) + 50) * 20) + 1019 - 1979
shoe_size_mod
shoe_size <- 9
shoe_size_mod <- (((shoe_size * 5) + 50) * 20) + 1018 - 1979
shoe_size_mod
knitr::read_chunk("math_trick.R")
shoe_size <- 9
shoe_size_mod <- (((shoe_size * 5) + 50) * 20) + 1018 - 1979
shoe_size_mod
weight_kg <- 55    # doesn't print anything
(weight_kg <- 55)  # but putting parenthesis around the call prints the value of `weight_kg`
weight_kg          # and so does typing the name of the object
country_climate <- data.frame(
country = c("Canada", "Panama", "South Africa", "Australia"),
climate = c("cold", "hot", "temperate", "hot/temperate"),
temperature = c(10, 30, 18, "15"),
northern_hemisphere = c(TRUE, TRUE, FALSE, "FALSE"),
has_kangaroo = c(FALSE, FALSE, FALSE, 1)
)
View(country_climate)
source("load_packages.R")
surveys <- read.csv("data/portal_data_joined.csv")
suppressWarnings(surveys$date <- lubridate::ymd(paste(surveys$year,
surveys$month,
surveys$day,
sep = "-")))
surveys <- read_csv("data/portal_data_joined.csv")
## inspect the data
str(surveys)
## preview the data
View(surveys)
## preview the data
View(surveys)
select(surveys, plot_id, species_id, weight)
library("rmarkdown", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight),
min_weight = min(weight)) %>%
arrange(desc(mean_weight))
surveys_complete <- surveys %>%
filter(!is.na(weight),           # remove missing weight
!is.na(hindfoot_length),  # remove missing hindfoot_length
!is.na(sex))                # remove missing sex
### Create the dataset for exporting:
##  Start by removing observations for which the `species_id`, `weight`,
##  `hindfoot_length`, or `sex` data are missing:
surveys_complete <- surveys %>%
filter(species_id != "",        # remove missing species_id
!is.na(weight),                 # remove missing weight
!is.na(hindfoot_length),        # remove missing hindfoot_length
sex != "")                      # remove missing sex
library("tidyverse", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
library("magrittr", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
### Create the dataset for exporting:
##  Start by removing observations for which the `species_id`, `weight`,
##  `hindfoot_length`, or `sex` data are missing:
surveys_complete <- surveys %>%
filter(species_id != "",        # remove missing species_id
!is.na(weight),                 # remove missing weight
!is.na(hindfoot_length),        # remove missing hindfoot_length
sex != "")                      # remove missing sex
## Extract the most common species_id
species_counts <- surveys_complete %>%
count(species_id) %>%
filter(n >= 50)
surveys_complete <- surveys %>%
filter(!is.na(weight),           # remove missing weight
!is.na(hindfoot_length),  # remove missing hindfoot_length
!is.na(sex))                # remove missing sex
surveys_gather <- surveys_spread %>%
gather(key = genus, value = mean_weight, -plot_id)
## load the tidyverse packages, incl. dplyr
library("tidyverse")
surveys <- read_csv("data/portal_data_joined.csv")
## inspect the data
str(surveys)
## preview the data
View(surveys)
select(surveys, plot_id, species_id, weight)
surveys %>%
mutate(weight_kg = weight / 1000)
surveys %>%
filter(!is.na(weight)) %>%
mutate(weight_kg = weight / 1000) %>%
head()
surveys_gather <- surveys_spread %>%
gather(key = genus, value = mean_weight, -plot_id)
surveys_spread <- surveys_gw %>%
spread(key = genus, value = mean_weight)
surveys_gw <- surveys %>%
filter(!is.na(weight)) %>%
group_by(genus, plot_id) %>%
summarize(mean_weight = mean(weight))
str(surveys_gw)
surveys_spread <- surveys_gw %>%
spread(key = genus, value = mean_weight)
str(surveys_spread)
surveys_gw %>%
spread(genus, mean_weight, fill = 0) %>%
head()
surveys_gather <- surveys_spread %>%
gather(key = genus, value = mean_weight, -plot_id)
str(surveys_gather)
surveys_spread %>%
gather(key = genus, value = mean_weight, Baiomys:Spermophilus) %>%
head()
surveys_complete <- surveys %>%
filter(!is.na(weight),           # remove missing weight
!is.na(hindfoot_length),  # remove missing hindfoot_length
!is.na(sex))                # remove missing sex
## Extract the most common species_id
species_counts <- surveys_complete %>%
count(species_id) %>%
filter(n >= 50)
## Only keep the most common species
surveys_complete <- surveys_complete %>%
filter(species_id %in% species_counts$species_id)
### Create the dataset for exporting:
##  Start by removing observations for which the `species_id`, `weight`,
##  `hindfoot_length`, or `sex` data are missing:
surveys_complete <- surveys %>%
filter(species_id != "",        # remove missing species_id
!is.na(weight),                 # remove missing weight
!is.na(hindfoot_length),        # remove missing hindfoot_length
sex != "")                      # remove missing sex
##  Now remove rare species in two steps. First, make a list of species which
##  appear at least 50 times in our dataset:
species_counts <- surveys_complete %>%
count(species_id) %>%
filter(n >= 50) %>%
select(species_id)
##  Second, keep only those species:
surveys_complete <- surveys_complete %>%
filter(species_id %in% species_counts$species_id)
library("pander", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
install.packages(c("callr", "glue", "gower", "loo", "Matrix", "pROC", "processx", "RcppArmadillo", "readxl", "rgl", "rmarkdown", "stringi", "sys", "tinytex"))
### Create the dataset for exporting:
##  Start by removing observations for which the `species_id`, `weight`,
##  `hindfoot_length`, or `sex` data are missing:
surveys_complete <- surveys %>%
filter(species_id != "",        # remove missing species_id
!is.na(weight),                 # remove missing weight
!is.na(hindfoot_length),        # remove missing hindfoot_length
sex != "")                      # remove missing sex
source("load_packages.R")
source("load_packages.R")
### Create the dataset for exporting:
##  Start by removing observations for which the `species_id`, `weight`,
##  `hindfoot_length`, or `sex` data are missing:
surveys_complete <- surveys %>%
filter(species_id != "",        # remove missing species_id
!is.na(weight),                 # remove missing weight
!is.na(hindfoot_length),        # remove missing hindfoot_length
sex != "")                      # remove missing sex
surveys <- read_csv("data/portal_data_joined.csv")
## inspect the data
str(surveys)
## preview the data
View(surveys)
source("load_packages.R")
surveys <- read_csv("data/portal_data_joined.csv")
## inspect the data
str(surveys)
select(surveys, plot_id, species_id, weight)
select(surveys, -record_id, -species_id)
filter(surveys, year == 1995)
surveys2 <- filter(surveys, weight < 5)
surveys_sml <- select(surveys2, species_id, sex, weight)
surveys_sml <- select(filter(surveys, weight < 5), species_id, sex, weight)
surveys %>%
filter(weight < 5) %>%
select(species_id, sex, weight)
surveys_sml <- surveys %>%
filter(weight < 5) %>%
select(species_id, sex, weight)
surveys_sml
surveys %>%
mutate(weight_kg = weight / 1000)
surveys %>%
mutate(weight_kg = weight / 1000,
weight_kg2 = weight_kg * 2)
surveys %>%
mutate(weight_kg = weight / 1000) %>%
head()
surveys %>%
filter(!is.na(weight)) %>%
mutate(weight_kg = weight / 1000) %>%
head()
surveys %>%
group_by(sex) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
surveys %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight))
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight)) %>%
print(n = 15)
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight),
min_weight = min(weight))
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight),
min_weight = min(weight)) %>%
arrange(min_weight)
surveys %>%
filter(!is.na(weight)) %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight),
min_weight = min(weight)) %>%
arrange(desc(mean_weight))
surveys %>%
count(sex)
surveys %>%
group_by(sex) %>%
summarise(count = n())
surveys %>%
count(sex, sort = TRUE)
surveys %>%
count(sex, species)
surveys %>%
count(sex, species) %>%
arrange(species, desc(n))
surveys_gw <- surveys %>%
filter(!is.na(weight)) %>%
group_by(genus, plot_id) %>%
summarize(mean_weight = mean(weight))
str(surveys_gw)
surveys_spread <- surveys_gw %>%
spread(key = genus, value = mean_weight)
str(surveys_spread)
surveys_gw %>%
spread(genus, mean_weight, fill = 0) %>%
head()
surveys_gather <- surveys_spread %>%
gather(key = genus, value = mean_weight, -plot_id)
str(surveys_gather)
surveys_spread %>%
gather(key = genus, value = mean_weight, Baiomys:Spermophilus) %>%
head()
surveys_complete <- surveys %>%
filter(!is.na(weight),           # remove missing weight
!is.na(hindfoot_length),  # remove missing hindfoot_length
!is.na(sex))                # remove missing sex
## Extract the most common species_id
species_counts <- surveys_complete %>%
count(species_id) %>%
filter(n >= 50)
## Only keep the most common species
surveys_complete <- surveys_complete %>%
filter(species_id %in% species_counts$species_id)
surveys <- read_csv("data/portal_data_joined.csv")
## inspect the data
str(surveys)
surveys <- read_csv("data/portal_data_joined.csv")
## Remember, no output is shown because we are simply assigning values to an object.
## Inspect the data using str() (what does str stand for?)
str(surveys)
## preview the data
View(surveys)
surveys <- read_csv("data/portal_data_joined.csv")
## Preview the data
view(surveys)
str(surveys)
select(surveys, plot_id, species_id, weight)
select(surveys, -record_id, -species_id)
filter(surveys, year == 1995)
surveys %>%
group_by(sex) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
surveys %>%
group_by(sex)
surveys %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
source("load_packages.R")
surveys <- read_csv("data/portal_data_joined.csv")
str(surveys)
select(surveys, plot_id, species_id, weight)
select(surveys, -record_id, -species_id)
filter(surveys, year == 1995)
surveys2 <- filter(surveys, weight < 5)
surveys_sml <- select(surveys2, species_id, sex, weight)
surveys_sml <- select(filter(surveys, weight < 5), species_id, sex, weight)
surveys %>%
filter(weight < 5) %>%
select(species_id, sex, weight)
surveys_sml <- surveys %>%
filter(weight < 5) %>%
select(species_id, sex, weight)
surveys_sml
surveys %>%
mutate(weight_kg = weight / 1000)
surveys %>%
mutate(weight_kg = weight / 1000,
weight_kg2 = weight_kg * 2)
surveys %>%
mutate(weight_kg = weight / 1000) %>%
head()
surveys %>%
filter(!is.na(weight)) %>%
mutate(weight_kg = weight / 1000) %>%
head()
surveys %>%
group_by(sex) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
surveys %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
surveys %>%
group_by(sex, species_id) %>%
summarize(mean_weight = mean(weight, na.rm = TRUE))
